var url=window.location.href;if(console.log(url),url.indexOf("checkouts")>-1){var t=function(){var o=document.getElementById("checkout_shipping_address_zip").value;document.cookie="_zipcode="+o+"; path=/",console.log(n("_zipcode")+"Cookie Set")},n=function(o){var a=new RegExp(o+"=([^;]+)"),r=a.exec(document.cookie);return r!=null?unescape(r[1]):null},e=function(){var o=document.querySelectorAll("[data-checkout-payment-due-target]")[0].innerHTML;if(o=o.replace(o.charAt(0),""),o=checkoutPrice(o),o<=minCartPrice){if(document.getElementById("checkout_shipping_address_phone")!=null){var a=document.getElementById("checkout_shipping_address_phone").value;localStorage.setItem("phoneno",a.replace(/\s/g,""))}var r=n("_zipcode"),l="pincode="+r,i=new XMLHttpRequest;i.withCredentials=!0,i.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var c=JSON.parse(this.responseText);if(console.log(c),c.status==!1)console.log("invalid zipcode"),localStorage.setItem("cod","N");else{var s=c.data.pincode_data.cod;console.log(s),localStorage.setItem("cod",s)}if(localStorage.getItem("cod")!="Y"&&localStorage.getItem("cod")!="undefined"){var d=document.querySelectorAll(".section--payment-method");d.length>0&&document.querySelectorAll('[data-select-gateway="124725959"]')[0]!=null&&(loggingSteps("Removing phase 4:"+r),document.querySelectorAll('[data-select-gateway="124725959"]')[0].remove())}else console.log(localStorage.getItem("cod")),console.log("cod available")}},r!=null&&(i.open("POST","https://poojastoreapi.mobikasa.net/api/v1/pincode/check-pincode-available",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("token","bm9raWFkZXYkJSZeKiFAQCVeJjlAMTIzNDUmJkpGRmxr"),i.send(l)),console.log(l)}else{localStorage.setItem("cod","N");var u=document.querySelectorAll(".section--payment-method");u.length>0&&document.querySelectorAll('[data-select-gateway="124725959"]')[0]!=null&&(loggingSteps("Removing phase 3:"+r),document.querySelectorAll('[data-select-gateway="124725959"]')[0].remove())}},saveCookie=t,getCookie=n,checkCod=e;console.log("checkouts");var minCartPrice=25e3,paymentSection=document.querySelectorAll(".section--payment-method");console.log(paymentSection.length),document.getElementsByClassName("step__footer__continue-btn btn")[0].addEventListener("click",t);var checkoutPrice=function(a){var a=a.match(/[\s-\d.\,]+/g);if(console.log(a),a)return+a[0].replace(/\,/g,"").replace(/\s/g,"")};document.getElementsByClassName("step__footer__continue-btn btn")[0].addEventListener("click",e),e()}if(typeof Checkout=="object"&&typeof Checkout.$=="function")var codTemplate='<div class="cod-otp-wrapper">\n                            <div class="field field--required field--half" data-address-field="cod_otp">\n                                <div class="field__input-wrapper">\n                                    <label class="field__label field__label--visible">Enter OTP</label>\n                                        <input placeholder="Enter OTP" autocomplete="checkout_otp" class="field__input" size="6" type="text" name="checkout_otp" id="checkout_otp" value="" />\n                                </div>\n                            </div>\n                            <div class="field field--half" data-address-field="cod_otp_btn">\n                                <div class="field__input-wrapper">\n                                    <button type="button" id="verify_mobile_otp" name="verify_otp" class="btn" style="padding-top:12px;padding-bottom:12px">Verify</button>\n                                </div>\n                            </div>\n                            <div class="clearfix"></div>\n                            <a href="javascript:void(0);" style="display:none;" id="regenerate_otp">Resend OTP</a>\n                        </div>';var url=window.location.href;if(console.log(url),url.indexOf("checkouts")>-1){var e=function(){var c=document.getElementById("checkout_shipping_address_zip").value;document.cookie="_zipcode="+c+"; path=/",console.log(a("_zipcode")+"Cookie Set")},a=function(c){var s=new RegExp(c+"=([^;]+)"),d=s.exec(document.cookie);return d!=null?unescape(d[1]):null},r=function(){var c=document.querySelectorAll("[data-checkout-payment-due-target]")[0].innerHTML;if(c=c.replace(c.charAt(0),""),c=checkoutPrice(c),c<=minCartPrice){if(document.getElementById("checkout_shipping_address_phone")!=null){var s=document.getElementById("checkout_shipping_address_phone").value;localStorage.setItem("phoneno",s.replace(/\s/g,""))}var d=a("_zipcode"),f="pincode="+d,p=new XMLHttpRequest;p.withCredentials=!0,p.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var m=JSON.parse(this.responseText);if(console.log(m),m.status==!1)console.log("invalid zipcode"),localStorage.setItem("cod","N");else{var v=m.data.pincode_data.cod;console.log(v),localStorage.setItem("cod",v)}if(localStorage.getItem("cod")!="Y"&&localStorage.getItem("cod")!="undefined"){var g=document.querySelectorAll(".section--payment-method");g.length>0&&document.querySelectorAll('[data-select-gateway="124725959"]')[0]!=null&&(loggingSteps("Removing phase 2:"+d),document.querySelectorAll('[data-select-gateway="124725959"]')[0].remove())}else console.log(localStorage.getItem("cod")),console.log("cod available")}},d!=null&&(p.open("POST","https://poojastoreapi.mobikasa.net/api/v1/pincode/check-pincode-available",!0),p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p.setRequestHeader("token","bm9raWFkZXYkJSZeKiFAQCVeJjlAMTIzNDUmJkpGRmxr"),p.send(f)),console.log(f)}else{localStorage.setItem("cod","N");var _=document.querySelectorAll(".section--payment-method");_.length>0&&document.querySelectorAll('[data-select-gateway="124725959"]')[0]!=null&&(loggingSteps("Removing phase 1:"+d),document.querySelectorAll('[data-select-gateway="124725959"]')[0].remove())}},saveCookie=e,getCookie=a,checkCod=r;console.log("checkouts");var minCartPrice=25e3,paymentSection=document.querySelectorAll(".section--payment-method");console.log(paymentSection.length),document.getElementsByClassName("step__footer__continue-btn btn")[0].addEventListener("click",e);var checkoutPrice=function(s){var s=s.match(/[\s-\d.\,]+/g);if(console.log(s),s)return+s[0].replace(/\,/g,"").replace(/\s/g,"")};document.getElementsByClassName("step__footer__continue-btn btn")[0].addEventListener("click",r),r()}if(typeof Checkout=="object"&&typeof Checkout.$=="function")var codTemplate='<div class="cod-otp-wrapper">\n                            <div class="field field--required field--half" data-address-field="cod_otp">\n                                <div class="field__input-wrapper">\n                                    <label class="field__label field__label--visible">Enter OTP</label>\n                                        <input placeholder="Enter OTP" autocomplete="checkout_otp" class="field__input" size="6" type="text" name="checkout_otp" id="checkout_otp" value="" />\n                                </div>\n                            </div>\n                            <div class="field field--half" data-address-field="cod_otp_btn">\n                                <div class="field__input-wrapper">\n                                    <button type="button" id="verify_mobile_otp" name="verify_otp" class="btn" style="padding-top:12px;padding-bottom:12px">Verify</button>\n                                </div>\n                            </div>\n                            <div class="clearfix"></div>\n                            <a href="javascript:void(0);" style="display:none;" id="regenerate_otp">Resend OTP</a>\n                        </div>';function setOtpTemplate(t){var n=document.getElementById("checkout_payment_gateway_124725959"),e=!1;n!=null&&(e=document.getElementById("checkout_payment_gateway_124725959").checked),e?(t&&sendOtp(),appendTemplate(!0)):appendTemplate(!1);var o=document.querySelectorAll('[name="checkout[payment_gateway]"]');o.forEach(function(a){a.addEventListener("click",clickFunction,!1)})}function clickFunction(t){console.log("Click Element");var n=document.getElementById("checkout_payment_gateway_124725959").checked;n?(sendOtp(),appendTemplate(!0)):appendTemplate(!1)}function removeErrorClass(t,n){if(!(!t||t.length===0))if(!t.length)t.classList.remove(n);else for(var e=0;e<t.length;e++)t[e].classList.remove(n)}function addErrorClass(t,n){if(!!t)if(!t.length)t.classList.add(n);else for(var e=0;e<t.length;e++)t[e].classList.add(n)}function verifyOtp(){var t=document.getElementById("checkout_otp"),n=document.querySelectorAll(".otp_error");n.length>0&&n[0].remove();var e=document.querySelectorAll(".otp_success");if(e.length>0&&e[0].remove(),t.value.trim()==""){addErrorClass(t.parentElement.parentElement,"field--error");var o=document.createElement("p");o.setAttribute("class","field__message field__message--error otp_error"),o.innerHTML="Please enter OTP",t.parentElement.appendChild(o)}else removeErrorClass(t.parentElement.parentElement,"field--error"),verifyOtpAjax(t.value)}function sendOtp(){var t=localStorage.getItem("phoneno"),n="mobileno="+t,e=new XMLHttpRequest,o=document.querySelectorAll(".otp_success");o.length>0&&o[0].remove(),e.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var a=JSON.parse(this.responseText),r=document.querySelectorAll(".otp_success");r.length>0&&r[0].remove();var l=document.createElement("p");l.setAttribute("class","field__message field__message--success otp_success"),l.innerHTML=a.message,document.querySelectorAll(".cod-otp-wrapper")[0].appendChild(l),document.getElementById("regenerate_otp").style.display="block"}},e.open("POST","https://poojastoreapi.mobikasa.net/api/v1/otp/generate",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.setRequestHeader("token","bm9raWFkZXYkJSZeKiFAQCVeJjlAMTIzNDUmJkpGRmxr"),e.send(n)}function regenerateOtp(){var t=document.querySelectorAll(".otp_success");t.length>0&&t[0].remove(),document.getElementById("regenerate_otp").addEventListener("click",sendOtp,!1)}function verifyOtpAjax(t){var n=localStorage.getItem("phoneno"),e="mobileno="+n+"&otp="+t,o=new XMLHttpRequest;o.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var a=JSON.parse(this.responseText),r=document.getElementById("checkout_otp"),l=document.querySelectorAll(".otp_success");l.length>0&&l[0].remove();var i=document.createElement("p");i.setAttribute("class","field__message field__message--success otp_success"),i.innerHTML=a.message,document.querySelectorAll(".cod-otp-wrapper")[0].appendChild(i),removeErrorClass(r.parentElement.parentElement,"field--error");var u=document.querySelectorAll(".step__footer__continue-btn");u.forEach(function(d){d.removeAttribute("disabled")}),document.querySelectorAll('[data-trekkie-id="complete_order_button"]')[0].click()}else if(this.readyState==4&&this.status==400){var a=JSON.parse(this.responseText);if(a.status==!1){var r=document.getElementById("checkout_otp"),c=document.querySelectorAll(".otp_error");c.length>0&&c[0].remove(),addErrorClass(r.parentElement.parentElement,"field--error");var s=document.createElement("p");s.setAttribute("class","field__message field__message--error otp_error"),s.innerHTML=a.message,r.parentElement.appendChild(s)}}},o.open("POST","https://poojastoreapi.mobikasa.net/api/v1/otp/validate",!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.setRequestHeader("token","bm9raWFkZXYkJSZeKiFAQCVeJjlAMTIzNDUmJkpGRmxr"),o.send(e)}function appendTemplate(t){if(t){var a=document.querySelectorAll('[data-select-gateway="124725959"]')[0].parentElement,r=document.createElement("div");r.setAttribute("class","radio-wrapper content-box__row content-box__row--secondary card-fields-container card-fields-container--loaded card-fields-container--transitioned cod-wrap"),r.innerHTML=codTemplate,a.appendChild(r);var e=document.querySelectorAll(".step__footer__continue-btn");e.forEach(function(u){u.setAttribute("disabled",!0)});var o=document.querySelectorAll('[name="verify_otp"]')[0];o.addEventListener("click",verifyOtp,!1),regenerateOtp()}else{var n=document.querySelectorAll(".cod-wrap"),e=document.querySelectorAll(".step__footer__continue-btn"),o=document.querySelectorAll('[name="verify_otp"]')[0];e.forEach(function(l){l.removeAttribute("disabled")}),n.length>0&&(n[0].remove(),o.removeEventListener("click",verifyOtp,!0))}}setTimeout(function(){jQuery(document).on("click",".section--billing-address #checkout_different_billing_address_true",function(){document.getElementById("checkout_billing_address_phone").setAttribute("type","text"),document.getElementById("checkout_billing_address_phone").setAttribute("maxlength","14");var t=document.getElementById("checkout_billing_address_phone");t.onkeydown=function(n){var e=n.which;if((e<48||e>57)&&(e<96||e>105)&&e!=8&&e!=38&&e!=37&&e!=39&&e!=40&&e!=46)return n.preventDefault(),!1}}),jQuery(document).on("keypress","#checkout_shipping_address_phone",function(){$(this).val($(this).val().replace(/\s/g,""))}),jQuery(document).on("keypress","#checkout_billing_address_phone",function(){$(this).val($(this).val().replace(/\s/g,""))})},700);function loggingSteps(t){var n={cart_id:Shopify.Checkout.token,log:"MPB-"+t};$.ajax({url:"https://pbdconnector.feedprojects.com/api/v1/feed/cc_log",type:"post",data:n,dataType:"json",success:function(o){console.log(o)}}).done(function(e){e.success==!0&&console.log(t)})}
//# sourceMappingURL=/s/files/1/2090/3151/files/checkout.1.8.1.js.map?12640922632779739659=
